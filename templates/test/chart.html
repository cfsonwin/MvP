<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css'%}">
    <link rel="stylesheet" href="{% static 'leaflet/leaflet.css'%}"/>
    <script type="text/javascript" src="{% static 'JS/select.js' %}"></script>
    <script src="{% static 'jquery.slim.min.js'%}"></script>
    <script src="{% static 'bootstrap.min.js'%}"></script>
    <script src="{% static 'leaflet/leaflet.js' %}"></script>
    <script src="{% static 'leaflet/leaflet.polylineDecorator.js' %}"></script>
    <script src="{% static 'chart/Chart.bundle.min.js' %}"></script>
    <style>
        .container_border {
          background-color: #fff;
          min-height: 500px;
          min-width: 500px;
          margin: auto;
          padding: 20px;
          border-style: outset;
        }

        .center {

          text-align: center;
          font-size: 18px;
        }

    </style>
</head>
<body>
<a href="{% url 'mT_index' %}" >Back test Homepage</a>
    <div class="container mt-3">
        <h1 class="center">Chart test</h1>
        <div class="row">
            <div class="col-md-6">
                <canvas id="myChart1" width="400" height="400"></canvas>
            </div>
            <div class="col-md-6">
                <canvas id="myChart2" width="400" height="400"></canvas>
            </div>
        </div>


    </div>

<script>
    var ctx = document.getElementById("myChart1");
    var type = 'bar';
    var array_all = [];
    var array_modified = [];
    var array_px = [];
    {% for x, y in info %}
        array_all.push({{x}});
        array_modified.push({{y}});
    {% endfor %}
    var max = Math.max(...array_all);
    var yAxes_max = max - max%10 + 10;
    {% for p in p_list %}
        array_px.push("{{p}}");
    {% endfor %}
    var data = {
        labels: array_px,
        datasets: [
            {
                label: 'all',
                data: array_all,
                backgroundColor: 'rgba(79,172,53,0.1)',
                borderWidth: 2,
            },
            {
                label: 'modified',
                data: array_modified,
                backgroundColor: 'rgba(134,171,216,0.2)',
            }
        ]
    }
    var myChart = new Chart(ctx, {
        type: type,
        data: data,

        options: {

            title: {
                display: true,
                text: "Chart 1",
                fontSize: '24',
            },
            scales: {
                xAxes: [
                    {
                        stacked: true
                    }
                ],
                yAxes:[{
                    ticks: {
                        min: 0,
                        max: yAxes_max
                    }
                }]
            },
            layout: {
                padding: {
                    left: 10,
                    right: 10,
                    top: 10,
                    bottom: 10
                }
            }
        }
    });
    var ctx2 = document.getElementById("myChart2");
    var type2 = 'line';
    var array_x_lable = [];
    var array_x_value = [];
    {% for key, value in info2.items %}
        array_x_lable.push({{key}});
        array_x_value.push({{value}});
    {% endfor %}
    var max2 = Math.max(...array_x_value);
    var yAxes_max2 = max2 - max2%10 + 10;
    var data2 = {
        labels: array_x_lable,
        datasets: [
            {
                label: 'all manufacturers',
                data: array_x_value,
                borderWidth: 2,
            },

        ]
    }
    var myChart22 = new Chart(ctx2, {
        type: type2,
        data: data2,

        options: {

            title: {
                display: true,
                text: "Chart 2",
                fontSize: '24',
            },
            scales: {

                yAxes:[{
                    ticks: {
                        min: 0,
                        max: yAxes_max2
                    }
                }]
            },
            layout: {
                padding: {
                    left: 10,
                    right: 10,
                    top: 10,
                    bottom: 10
                }
            }
        }
    });
</script>
</body>
</html>